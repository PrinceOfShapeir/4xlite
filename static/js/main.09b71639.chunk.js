(this.webpackJsonp4xlite=this.webpackJsonp4xlite||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),o=n(3),a=n.n(o),c=(n(16),n(5)),i=n(6),l=n(8),d=n(7),u=(n(17),n(0));var h=function(e){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("p",{children:["This is my submission for the august ",Object(u.jsx)("a",{className:"App-link",href:"https://mintbean.io/meets/d51762d5-b874-4cc1-a420-ff316600192f",target:"_blank",rel:"noopener noreferrer",children:"Mintbean Hackathon."})]}),Object(u.jsx)("p",{children:"This is intended to be a mock up of a 4x game, featuring procedural world generation."}),Object(u.jsxs)("p",{children:["If you like the game, or would like to collaborate on work, you may visit my ",Object(u.jsx)("a",{href:"https://princeofshapeir.github.io/react-portfolio/",children:"home page"}),"."]})]})},m=n(11);function j(e,t,n,r){var s=Math.random(),o=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.9;return Math.pow(r,e)+Math.pow(r,n-1-t)}(e,t,n,r);return s<=o?(console.log("water probability was "+o),"water"):(s=Math.random())<.33?"hills":s<.66?"trees":"grass"}var b=function(e,t){for(var n=[],r=0;r<e;r++){n.push([]);for(var s=0;s<e;s++)n[r][s]={x:r,y:s,terrain:j(r,s,e,t),settled:!1}}return n},p=n.p+"static/media/trees.45f638e9.svg",f=n.p+"static/media/grass.85473006.svg",g=n.p+"static/media/water.7ede080d.svg",x=n.p+"static/media/hills.352b1dd7.svg",O=n.p+"static/media/treesCity.630c4054.svg",v=n.p+"static/media/hillsCity.00cc3259.svg",y=n.p+"static/media/grassCity.adab9481.svg";function w(e,t){var n=[],r=function(r){var s=e[r].settled;switch(e[r].terrain){case"grass":n.push(Object(u.jsx)("td",{style:{padding:0,margin:0},children:s?Object(u.jsx)("img",{src:y,alt:"grassCity",onClick:function(){return t("grass",e[r].x,e[r].y)}}):Object(u.jsx)("img",{src:f,alt:"grass",onClick:function(){return t("grass",e[r].x,e[r].y)}})}));break;case"trees":n.push(Object(u.jsx)("td",{style:{padding:0,margin:0},children:s?Object(u.jsx)("img",{src:O,alt:"treesCity",onClick:function(){return t("trees",e[r].x,e[r].y)}}):Object(u.jsx)("img",{src:p,alt:"trees",onClick:function(){return t("trees",e[r].x,e[r].y)}})}));break;case"hills":n.push(Object(u.jsx)("td",{style:{padding:0,margin:0},children:s?Object(u.jsx)("img",{src:v,alt:"hillsCity",onClick:function(){return t("hills",e[r].x,e[r].y)}}):Object(u.jsx)("img",{src:x,alt:"hills",onClick:function(){return t("hills",e[r].x,e[r].y)}})}));break;case"water":n.push(Object(u.jsx)("td",{style:{padding:0,margin:0},children:Object(u.jsx)("img",{src:g,alt:"water",onClick:function(){return t("water",e[r].x,e[r].y)}})}));break;default:console.log("Error Default"),n.push(Object(u.jsx)("td",{style:{padding:0,margin:0},children:Object(u.jsx)("img",{src:f,alt:"grass",onClick:function(){return t("grass",e[r].x,e[r].y)}})}))}};for(var s in e)r(s);return Object(u.jsx)("tr",{style:{lineHeight:0},children:n})}function k(e,t){var n=[];for(var r in e)n.push(w(e[r],t));return n}var T=function(e,t){return function(e,t){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("table",{cellpadding:"0",cellspacing:"0",border:"0",style:{borderCollapse:"collapse"},children:[Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{children:Object(u.jsx)("th",{colspan:"2",children:"World Map"})})}),Object(u.jsx)("tbody",{children:k(e,t)})]})})}(e,t)},C=n(4),S={meteorite:{text:"As you gaze upon the multitude of stars in the night sky, a bright orange fireball lights up the firmament. Panting for breath, you race to the scene. Inside a smoking crater, you find a glowing hunk of rock. As it cools, you notice an otherworldy silvery metallic sheen, the likes of which you have never seen. You claim it in the name of your people. You make it into ",option1Text:"Swords",option2Text:"Plowshares",outcome1Title:"Ancestral Sword Gained",outcome2Title:"Water From The Earth",outcome1Text:"The sword is heavy and quite unwieldy, yet the villagers are in awe of the sight of it. Tributes pour in, and soon your coffers are full.",outcome2Text:"Loathe to sully the sacred iron, the villagers implement it as a tool of divination. The dowsing rod strikes fresh water. You have invented the well.",outcome1Payoffs:{food:0,production:0,commerce:10,fpy:0,ppy:0,cpy:0},outcome2Payoffs:{food:10,production:0,commerce:0,fpy:0,ppy:0,cpy:0}}};function E(){var e=Object.keys(S);for(var t in e){var n=Math.floor(Math.random()*Math.floor(e.length)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}function G(e,t,n,r,s,o,a,c,i){return Object(u.jsxs)(u.Fragment,{children:[function(){switch(e){case"grass":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:f,alt:"grass"}),"\xa0",Object(u.jsxs)("p",{children:["You have ",o?"settled":"chosen"," grassland, which produces two food."]})]});case"hills":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:x,alt:"hills"}),"\xa0",Object(u.jsxs)("p",{children:["You have ",o?"settled":"chosen"," hills, which produces two production, and has a defensive bonus."]})]});case"trees":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:p,alt:"trees"}),"\xa0",Object(u.jsxs)("p",{children:["You have ",o?"settled":"chosen"," forest, which produces one food and one production."]})]});case"water":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:g,alt:"water"}),"\xa0",Object(u.jsxs)("p",{children:["You have ",o?"settled":"chosen"," water, which you were told not to do. Water produces one food, and one commerce point."]})]});default:return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"You have somehow chosen that which cannot be chosen. The FBI are on their way."}),"\xa0",Object(u.jsx)("p",{children:e})]})}}(),Object(u.jsx)("br",{})," \xa0","water"!=e&&!o&&i>0&&Object(u.jsx)("button",{type:"button",onClick:function(){return r(t,n)},children:"Settle Here!"})]})}var M=function(e){return e.endGame?Object(u.jsx)(C.a,{bg:"light",expand:"md",fixed:"bottom",children:"Victory"===e.endGame?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(C.a.Text,{children:"Your people have tamed the waters and held back the tide. History will remember you as the first. "}),"\xa0",Object(u.jsxs)(C.a.Text,{children:["Final city count: ",e.cityCount]})]}):Object(u.jsx)("p",{children:"You and your people sink beneath the waves. Forgotten like so many others."})}):Object(u.jsxs)(C.a,{bg:"light",expand:"md",fixed:"bottom",children:[10===e.turn&&Object(u.jsxs)("p",{children:["A village elder comes to you in the dead of night, recounting a vision of doom. Within ",e.endGameTurns," moons, they say, a great flood will inundate the land, erasing any and all trace of a once proud people. As some of the villagers make to stitch together rafts and flee, you begin an impassioned plea not to abandon all that you have accomplished thus far. You have until then to rally the four tribes, to construct great works to hold back the waters, or else the land will descend once more into barbarism."]}),"\xa0",10!==e.turn&&Object(u.jsx)(u.Fragment,{children:e.currentEvent?Object(u.jsxs)(u.Fragment,{children:[" ",!e.eventOutcome&&Object(u.jsxs)("p",{children:[S[e.currentEvent].text," ",Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",onClick:function(){return e.tallyEventOutcome(S[e.currentEvent].outcome1Payoffs,1)},children:S[e.currentEvent].option1Text}),"\xa0\xa0",Object(u.jsx)("button",{type:"button",onClick:function(){return e.tallyEventOutcome(S[e.currentEvent].outcome2Payoffs,2)},children:S[e.currentEvent].option2Text})]}),e.eventOutcome&&Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:S[e.currentEvent]["outcome".concat(e.whichEventNumber,"Text")]}),Object(u.jsx)("p",{children:Object(u.jsx)("button",{type:"button",onClick:e.killEvent,children:"Well, alright then."})})]})]}):Object(u.jsx)("p",{children:"There are no current events."})}),"\xa0",e.settlers>0&&(t=e.settlers,Object(u.jsxs)("p",{children:["You have ",t," settlers. You should probably put them somewhere. You can do this by clicking on some non-watery terrain. "]})),"\xa0",e.selectedTerrain&&G(e.selectedTerrain,e.selectedTerrainX,e.selectedTerrainY,e.settle,e.settled,e.selectedIsSettled,e.turn,e.nextTurn,e.settlers),"\xa0",e.settled&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{children:["Food: ",e.food]}),Object(u.jsxs)("p",{children:["Production: ",e.production]}),Object(u.jsxs)("p",{children:["Commerce: ",e.commerce]})]}),"\xa0",e.turn>10&&Object(u.jsxs)("p",{children:["Turns until the Flood: ",e.endGameTurns-e.turn]}),"\xa0",e.settled&&Object(u.jsxs)("button",{type:"button",onClick:e.nextTurn,children:["End Turn ",e.turn]})]});var t},F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={worldGen:!1,worldMap:null,worldSize:50,settlers:1,settled:!1,selectedTerrain:null,turn:0,food:0,production:0,commerce:0,foodIncome:0,foodConsumption:0,commerceIncome:0,productionIncome:0,endGame:null,cityCount:0,endGameTurns:60,eventsOrder:E(),currentEvent:null,eventOutcome:!1,whichEventNumber:null},e.killEvent=function(){e.state.currentEvent&&e.setState({currentEvent:null,eventOutcome:!1,whichEventNumber:null})},e.tallyEventOutcome=function(t,n){return console.log("Should be firing event outcome ".concat(n)),e.setState({food:e.state.food+t.food,production:e.state.production+t.production,commerce:e.state.commerce+t.commerce,eventOutcome:!0,whichEventNumber:n})},e.fireEvent=function(){var t=Object(m.a)(e.state.eventsOrder),n=t.pop();return console.log(n),e.setState({currentEvent:n,eventsOrder:t})},e.defeat=function(){e.setState({worldMap:b(e.state.worldSize,1)})},e.endGame=function(){return e.state.production-100>=0?e.setState({endGame:"Victory"}):(e.setState({endGame:"Defeat"}),e.defeat())},e.nextTurn=function(){if(e.state.turn>=e.state.endGameTurns)return e.endGame();e.state.eventsOrder.length>0&&Math.random()<=.2&&e.fireEvent();var t=e.state.foodIncome-e.state.foodConsumption,n=e.state.productionIncome,r=e.state.commerceIncome;return e.state.food>10&&(console.log("Should be spawning a new pop"),t-=10,e.setState({settlers:e.state.settlers+1})),e.setState({turn:e.state.turn+1,food:e.state.food+t,production:e.state.production+n,commerce:e.state.commerce+r})},e.generateWorld=function(){return e.setState({worldMap:b(e.state.worldSize),worldGen:!e.state.worldGen})},e.setSize=function(t){return e.setState({worldSize:t.target.value})},e.selectTerrain=function(t,n,r){return e.setState({selectedTerrain:t,selectedTerrainX:n,selectedTerrainY:r})},e.settle=function(t,n){var r=JSON.parse(JSON.stringify(e.state.worldMap));switch(r[t][n].settled=!0,r[t][n].terrain){case"grass":console.log("adding grassland income"),e.setState({foodIncome:e.state.foodIncome+2});break;case"hills":console.log("Adding hills income"),e.setState({productionIncome:e.state.productionIncome+2});break;case"trees":console.log("adding trees income"),e.setState({foodIncome:e.state.foodIncome+1,productionIncome:e.state.productionIncome+1});break;default:console.log("settlers are having trouble cultivating the land")}return e.setState({worldMap:r}),e.settledCallBack()},e.settledCallBack=function(){return e.setState({settled:!0,settlers:e.state.settlers-1,foodConsumption:e.state.foodConsumption+1,cityCount:e.state.cityCount+1})},e.renderWorldGenTemplate=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Here is a primordial world without parameters."}),Object(u.jsx)("p",{children:"What is the size of this world?"}),Object(u.jsxs)("form",{children:[Object(u.jsxs)("label",{children:["Selected map type is ",e.state.worldSize>30?"Pangaea":"Archipelago"]}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"number",name:"size",min:"20",max:"100",value:e.state.worldSize,onChange:e.setSize}),Object(u.jsx)("button",{type:"button",onClick:e.generateWorld,children:"Generate World"})]})]})},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[!this.state.worldGen&&Object(u.jsx)(this.renderWorldGenTemplate,{}),this.state.worldMap&&T(this.state.worldMap,this.selectTerrain),this.state.worldMap&&M({settled:this.state.settled,settlers:this.state.settlers,selectedTerrain:this.state.selectedTerrain,selectedTerrainX:this.state.selectedTerrainX,selectedTerrainY:this.state.selectedTerrainY,selectedIsSettled:this.state.worldMap[0|this.state.selectedTerrainX][0|this.state.selectedTerrainY].settled,turn:this.state.turn,food:this.state.food,commerce:this.state.commerce,production:this.state.production,settle:this.settle,nextTurn:this.nextTurn,endGame:this.state.endGame,cityCount:this.state.cityCount,endGameTurns:this.state.endGameTurns,currentEvent:this.state.currentEvent,killEvent:this.killEvent,eventOutcome:this.state.eventOutcome,tallyEventOutcome:this.tallyEventOutcome,whichEventNumber:this.state.whichEventNumber})]})}}]),n}(r.Component),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={splashVisible:!0},e.toggleSplash=function(){e.setState({splashVisible:!e.state.splashVisible})},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[this.state.splashVisible&&Object(u.jsx)(h,{toggleSplash:this.toggleSplash}),!this.state.splashVisible&&Object(u.jsx)(F,{}),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h4",{children:"Play Music"}),Object(u.jsx)("iframe",{width:this.state.splashVisible?"250":"50",height:this.state.splashVisible?"250":"50",src:"https://www.youtube-nocookie.com/embed/videoseries?list=PL18D349C72C3BB0D5",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),this.state.splashVisible&&Object(u.jsx)("p",{children:Object(u.jsx)("button",{type:"button",onClick:this.toggleSplash,children:"Just take me to the game already!"})})]})]})}}]),n}(r.Component);n(22);a.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.09b71639.chunk.js.map